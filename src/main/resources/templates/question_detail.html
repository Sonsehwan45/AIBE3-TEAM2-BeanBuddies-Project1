<html layout:decorate="~{layout}">
<div layout:fragment="content">
    <h1 th:text="${question.title}">제목</h1>
    <p th:text="${question.content}">내용</p>
    <p th:text="${question.author.nickname}">작성자</p>
    <p th:text="${#temporals.format(question.createdDate, 'yyyy-MM-dd HH:mm')}">작성일</p>
    <p th:text="${#temporals.format(question.modifiedDate, 'yyyy-MM-dd HH:mm')}">수정일</p>

    <div>
        <a th:href="@{/question/modify/{id}(id=${question.id})}">
            <button type="button">수정</button>
        </a>

        <form th:action="@{/question/delete/{id}(id=${question.id})}" method="post" style="display:inline;">
            <button type="submit" onclick="return confirm('정말 삭제하시겠습니까?');">삭제</button>
        </form>
    </div>

    <div>
        <h3>답변 작성</h3>
        <form th:action="@{/answer/write/{id}(id=${question.id})}" method="post" th:object="${form}">
            <textarea th:field="*{content}" rows="4" cols="50" placeholder="답변 내용을 입력하세요"></textarea>
            <div th:if="${#fields.hasErrors('content')}" style="color:red;">
                <p th:errors="*{content}"></p>
            </div>
            <br/>
            <button type="submit">답변 등록</button>
        </form>
    </div>

    <div>
        <h3>답변 목록</h3>
        <ul>
            <li th:each="answer : ${question.answers}">
                <p th:text="${answer.content}">답변 내용</p>
                <p>작성자: <span th:text="${answer.author.nickname}">작성자</span></p>
                <p>작성일: <span th:text="${#temporals.format(answer.createdDate, 'yyyy-MM-dd HH:mm')}">작성일</span></p>
            </li>
        </ul>
    </div>

</div>

